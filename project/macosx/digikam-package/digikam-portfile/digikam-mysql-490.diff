--- Portfile-480.orig	2015-03-26 23:32:04.000000000 -0500
+++ Portfile	2015-04-15 13:16:06.000000000 -0500
@@ -6,7 +6,7 @@
 PortGroup           compiler_blacklist_versions 1.0
 
 name                digikam
-version             4.8.0
+version             4.9.0
 categories          kde kde4
 license             GPL-2+
 maintainers         hyper-world.de:jan openmaintainer \
@@ -19,9 +19,8 @@
 homepage            http://www.digikam.org/
 master_sites        kde:stable/digikam/
 
-checksums           rmd160  93ceb3b3b98739254c97df5aefc2c3965a7a9011 \
-                    sha256  e20f84508f35fddcaec3b931efbc604a95050ec08c6796b6bc60a61cd58fa390
-
+checksums           rmd160  72e680f932aca65fe0d59a5c313b1d7950ec29ef \
+                    sha256  fa24591d183e1a782e053bfca43bb91149465d0f5e49926c7d6dd16f6321f07f
 use_bzip2           yes
 
 # List of whole dependencies ###############################################
@@ -163,18 +162,43 @@
     depends_lib-append port:lcms
 }
 
-# Option to check MySQL availability before compiling target
+# Option to enable internal MySQL server
 
-variant mysql_check description {Check MySQL availability before building digiKam} {}
+variant mysql_internal description {Enable support for internal MySQL database} {}
 
-if {[variant_isset mysql_check]} {
+if {[variant_isset mysql_internal]} {
     configure.args-append -DENABLE_INTERNALMYSQL=on
-
-    depends_lib-append    path:bin/mysql_config5:mysql5 \
+    depends_lib-append    path:bin/mysql_config:mysql5 \
 } else {
     configure.args-append -DENABLE_INTERNALMYSQL=off
 }
 
+# Options to build external MySQL database support
+
+variant mysql51_external \
+    description {Enable external MySQL 5.1 database support} {
+    configure.args-append -DENABLE_MYSQLSUPPORT=ON
+    depends_lib-append    port:qt4-mac-mysql51-plugin
+}
+
+variant mysql55_external \
+    description {Enable external MySQL 5.5 database support} {
+    configure.args-append -DENABLE_MYSQLSUPPORT=ON
+    depends_lib-append    port:qt4-mac-mysql55-plugin
+}
+
+variant mysql56_external \
+    description {Enable external MySQL 5.6 database support} {
+    configure.args-append -DENABLE_MYSQLSUPPORT=ON
+    depends_lib-append    port:qt4-mac-mysql56-plugin
+}
+
+variant mariadb_external \
+    description {Enable external MySQL database support using MariaDB 5.5} {
+    configure.args-append -DENABLE_MYSQLSUPPORT=ON
+    depends_lib-append    port:qt4-mac-mariadb-plugin
+}
+
 livecheck.type      regex
 livecheck.url       http://kde-apps.org/content/show.php/digiKam+Software+Collection?content=137059
 livecheck.regex     "digiKam Software Collection.*(4\\.\\d+?(\\.\\d+))"
